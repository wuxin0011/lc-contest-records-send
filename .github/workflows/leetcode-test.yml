name: 基础邮件测试

on:
  workflow_dispatch:  # 只允许手动触发，便于测试

jobs:
  send-test-email:
    runs-on: ubuntu-latest
    
    steps:
    - name: Send simple test email
      uses: dawidd6/action-send-mail@v3
      with:
        server_address: smtp.qq.com
        server_port: 587
        username: ${{ secrets.QQ_EMAIL }}
        password: ${{ secrets.QQ_EMAIL_AUTH_CODE }}
        subject: 'GitHub Actions配置测试'
        to: 'test@example.com'  # 先用一个测试邮箱
        from: 'Test Bot <${{ secrets.QQ_EMAIL }}>'
        body: '这是一封配置测试邮件'
        ignore_cert: true

    - name: Success message
      run: echo "✅ 测试邮件已发送！"